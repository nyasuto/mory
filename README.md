# 🦔 Mory

ClaudeにパーソナルメモリーサービスWebAPIを追加するMCPサーバーです。ChatGPTのメモリ機能のように、会話を跨いで情報を記憶し、よりパーソナライズされた対話を実現します。

## 🎯 プロジェクトビジョン

Mory（モリー）は、ハリネズミのように小さくて賢い、あなただけのメモリアシスタントです。Claudeに永続的なメモリ機能を追加し、ユーザーの情報を記憶して文脈に応じた返答ができるようにします。すべてのデータはローカルに保存され、ユーザーが完全にコントロールできます。

## 🚀 機能（予定）

- **永続的メモリ**: 会話を跨いで個人情報を保存・取得
- **スマート検索**: 複数の検索戦略による確実な情報取得
- **プライバシー重視**: すべてのデータをローカル保存、クラウド依存なし
- **カテゴリ・タグ管理**: 効率的な情報整理と検索
- **バージョン管理**: 情報の更新履歴を追跡
- **エクスポート/インポート**: データの完全な管理権限

## 📋 開発ロードマップ

### 🦔 MVP Phase 1: 基本的なメモリ操作（現在）
- シンプルなキー・バリューストレージ
- 基本的な保存・取得操作
- ローカルJSONファイルストレージ
- **明示的な指示による保存のみ**（「覚えて」「記憶して」「メモして」）

### Phase 2: 検索機能の強化 + スマート提案
- 部分一致検索
- 複数の検索戦略
- 検索結果のランキング
- **確認付き自動提案**（重要な個人情報を検出時に保存を提案）

### Phase 3: 高度な機能 + 自動化
- セマンティック検索
- 自動カテゴリ分類
- 競合解決メカニズム
- データ暗号化
- **カスタマイズ可能な自動保存**（ユーザー設定に基づく）

### Phase 4: ユーザー体験
- メモリ管理UI
- 一括操作
- 分析・インサイト機能
- 保存ルールのカスタマイズUI

## 🛠️ 技術スタック

- **言語**: Go
- **プロトコル**: MCP (Model Context Protocol)
- **ストレージ**: JSONファイル (MVP)、SQLite (将来)
- **ランタイム**: Go 1.21+

## 📁 プロジェクト構造

```
mory/
├── cmd/
│   └── mory/
│       └── main.go         # エントリーポイント
├── internal/
│   ├── memory/
│   │   ├── store.go        # メモリストレージロジック
│   │   ├── search.go       # 検索実装
│   │   └── types.go        # 型定義
│   ├── mcp/
│   │   ├── server.go       # MCPサーバー実装
│   │   └── handlers.go     # ツールハンドラー
│   └── config/
│       └── config.go       # 設定管理
├── data/
│   └── memories.json       # ローカルストレージ (git-ignored)
├── test/
├── go.mod
├── go.sum
├── Makefile
└── README.md
```

## 🔧 インストール

```bash
# リポジトリのクローン
git clone https://github.com/yourusername/mory.git
cd mory

# 依存関係のインストール
go mod download

# ビルド
make build

# 開発モードで実行
make run
```

## 🚦 はじめ方

1. **Claude Desktopの設定**

Claude Desktopの設定に以下を追加：

```json
{
  "mcpServers": {
    "mory": {
      "command": "/path/to/mory/bin/mory"
    }
  }
}
```

2. **メモリ機能の使用**

Claudeとの会話で：
- 「私の誕生日は5月15日です」と伝える
- 別の会話で「私の誕生日はいつ？」と聞く

## 📝 MVP Phase 1 仕様

### コア機能

1. **メモリの保存** 🦔
   - ツール: `save_memory`
   - パラメータ: category, key, value
   - タイムスタンプ付きで情報を保存

2. **メモリの取得** 
   - ツール: `get_memory`
   - パラメータ: key
   - 完全一致のみ取得

3. **メモリの一覧表示**
   - ツール: `list_memories`
   - パラメータ: category (オプション)
   - 保存されたすべての情報を表示

### 保存ルール（Phase別）

#### 🦔 Phase 1: 明示的な指示のみ（現在）
Claudeは以下の場合のみメモリを保存します：
- 「覚えて」「記憶して」「メモして」などの明示的な指示がある場合
- 例: 「私の誕生日は5月15日です。覚えておいて」

#### Phase 2: 確認付き自動提案
Claudeが重要な個人情報を検出した場合：
- 保存前に必ず確認を取る
- 例: 「この情報を記憶しておきましょうか？」
- 対象: 名前、誕生日、家族情報、好み、重要な予定など

#### Phase 3: カスタマイズ可能な自動保存
ユーザーの設定に基づいて：
- 自動保存レベルの調整（なし/確認/自動）
- カテゴリ別の保存設定
- NGワードリストの管理

### データモデル

```go
type Memory struct {
    ID        string    `json:"id"`
    Category  string    `json:"category"`
    Key       string    `json:"key"`
    Value     string    `json:"value"`
    CreatedAt time.Time `json:"created_at"`
    UpdatedAt time.Time `json:"updated_at"`
}
```

### ストレージ

- シンプルなJSONファイル: `data/memories.json`
- ファイルロックによる同期的な読み書き
- 単一ユーザー想定（同時アクセス制御は最小限）

### 使用例

```go
// メモリの保存
memory := &Memory{
    Category: "personal",
    Key:      "birthday",
    Value:    "1990年5月15日",
}
err := store.Save(memory)

// メモリの取得
result, err := store.Get("birthday")

// カテゴリ別一覧
memories, err := store.List("personal")
```

### Claudeとの対話例

**Phase 1（明示的な指示）:**
```
ユーザー: 私の誕生日は5月15日です。覚えておいて
Claude: [save_memory実行] はい、誕生日を5月15日として記憶しました。

ユーザー: 私は大阪に住んでいます
Claude: 大阪にお住まいなんですね。（保存しない）

ユーザー: メモ：好きな色は青
Claude: [save_memory実行] 好きな色が青であることを記憶しました。
```

## 🔒 セキュリティとプライバシー

- すべてのデータはローカルに保存
- 外部サービスへの通信なし
- 将来的に暗号化オプションを追加予定

### 保存されない情報

Moryは以下の情報を自動的に保存しません：
- 一時的な状態（今日の体調、現在の気分）
- 明示的な指示のない会話内容
- パスワードや機密情報

### ユーザーコントロール

- いつでもメモリの削除が可能
- カテゴリ単位での一括管理
- エクスポート/インポート機能（将来実装）

## 🤝 コントリビューション

Moryは開発初期段階です。イシューやプルリクエストを歓迎します！

### 開発ガイドライン

1. MVPはシンプルに保つ
2. 機能より信頼性を優先
3. すべての設計判断をドキュメント化
4. コア機能のテストを作成

### コーディング規約

```bash
# フォーマット
make fmt

# リント
make lint

# テスト
make test
```

## 🦔 なぜ「Mory」？

ハリネズミは小さな体に多くの針（記憶）を持っています。Moryも同じように、コンパクトながら多くの大切な記憶を安全に保管します。

## 📄 ライセンス

MIT License - このプロジェクトを自由に使用・改変してください。

## 🙏 謝辞

- MCPプロトコルを作成したAnthropic
- インスピレーションとフィードバックをくれたClaudeコミュニティ

---

**現在のステータス**: 🦔 MVP Phase 1 開発中

**次のステップ**: 
1. 基本的なストレージメカニズムの実装
2. MCPツールハンドラーの作成
3. Claude Desktopでのテスト
4. フィードバックを元に改善

## 💬 お問い合わせ

質問や提案がある場合は、Issueを作成してください。

---

*Mory - Your personal memory hedgehog for Claude 🦔*